FastApiLog|2025-11-08 03:58:20.989|ERROR|17020:13212|fastapi_util.py:57|fastapi_util.custom_route_handler|list_students_exception
Traceback (most recent call last):
  File "D:\000Mine\student_behavior_web\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\000Mine\student_behavior_web\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: students.student_code

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\000Mine\student_behavior_web\core\fastapi_util.py", line 46, in custom_route_handler
    response: Response = await original_route_handler(request)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\000Mine\student_behavior_web\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\000Mine\student_behavior_web\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\000Mine\student_behavior_web\api\students_api.py", line 43, in list_students
    items = crud.get_students(db, skip=skip, limit=limit, search=search, status=status)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\000Mine\student_behavior_web\db\crud.py", line 33, in get_students
    return query.order_by(models.Student.created_at.desc()).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\000Mine\student_behavior_web\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "D:\000Mine\student_behavior_web\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "D:\000Mine\student_behavior_web\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\000Mine\student_behavior_web\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\000Mine\student_behavior_web\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\000Mine\student_behavior_web\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "D:\000Mine\student_behavior_web\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\000Mine\student_behavior_web\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\000Mine\student_behavior_web\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\000Mine\student_behavior_web\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\000Mine\student_behavior_web\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\000Mine\student_behavior_web\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\000Mine\student_behavior_web\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: students.student_code
[SQL: SELECT students.id AS students_id, students.student_code AS students_student_code, students.name AS students_name, students.email AS students_email, students.phone AS students_phone, students.date_of_birth AS students_date_of_birth, students.gender AS students_gender, students.address AS students_address, students.class_name AS students_class_name, students.academic_level AS students_academic_level, students.course AS students_course, students.major AS students_major, students.gpa AS students_gpa, students.status AS students_status, students.photo_path AS students_photo_path, students.face_embedding_count AS students_face_embedding_count, students.created_at AS students_created_at, students.updated_at AS students_updated_at 
FROM students ORDER BY students.created_at DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
